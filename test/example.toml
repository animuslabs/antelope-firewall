# For help with toml format: https://toml.io/en/v1.0.0

# Can be "round_robin"
routing_mode = "round_robin"

# Port that the firewall will run on
port = 3000

# Port that prometheus will run on
prometheus_port = 3001

# Healthcheck will run a get_info request every `interval` seconds on all nodes to determine
# which nodes are in sync. If a node has a head_block_time more than `grace_period` seconds
# older than the current system time, that node will not be considered as a valid node
# to route requests to. Healthcheck will then keep making requests at the same interval
# to determine if the node re-syncs.
#
# This is an optional field. If you remove or comment out the below table healthcheck will
# not run.
[healthcheck]
# must be non zero
interval = 15
grace_period = 5

[filter]
# block transactions that contain an action sent to an account in the below array 
block_contracts = ["eosio"]
# block requests that originate from the below IP list.
block_ips = []

# Every table in the ratelimit array constitutes a new rate limiter that will be applied in
# consecutive order

[[ratelimit]]
# Name of ratelimiter, used for logging
name = "base"
limit_on = "attempt"
bucket_type = "sender"
limit = 10
window_duration = 60

[[ratelimit]]
name = "failure"
limit_on = "failure"
bucket_type = "sender"
limit = 1
window_duration = 10

# List of nodes that requests that mutate blockchain state can be forwarded to
[[push_nodes]]
# Name of node, used for logging
name = "push"
# base url that requests will be forwarded to. Please put without the ending /
url = "https://eos.greymass.com"
# Must be non-zero. Can be left out, will default to 1
routing_weight = 1

# List of nodes that requests that only read blockchain state can be forwarded to
[[get_nodes]]
name = "get"
url = "https://eos.greymass.com"

[[get_nodes]]
name = "get"
url = "https://mainnet.genereos.io"
